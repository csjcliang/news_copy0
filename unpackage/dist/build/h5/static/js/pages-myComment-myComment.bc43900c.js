(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-myComment-myComment"],{"222a":function(t,e,n){"use strict";var i=n("efa4"),o=n.n(i);o.a},3503:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".support-active[data-v-3301b746]{color:#ed4040}",""]),t.exports=e},"35e8":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"p-2 animated fast fadeIn"},[n("v-uni-view",{staticClass:"flex align-center justify-between"},[n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-image",{staticClass:"mr-3 rounded-circle",style:t.sizeOfAvatar,attrs:{src:""==t.avatar?"../../static/logo.png":t.avatar,"lazy-load":!0}}),n("v-uni-view",[n("v-uni-view",{class:t.fontSizeUserName,staticStyle:{"line-height":"1.3"}},[t._v(t._s(t.item.username))]),n("v-uni-text",{class:t.fontSizeTimestamp,staticStyle:{color:"#9D9589","line-height":"1.3"}},[t._v(t._s(t.item.comment_timestamp))])],1)],1)],1),n("v-uni-view",{staticClass:"my-1 mx-5",class:t.fontSizeContent,staticStyle:{"line-height":"1.4"}},[t._v(t._s(t.item.content))]),n("v-uni-view",{staticClass:"flex justify-between mx-5",class:t.fontSizeContent},[n("v-uni-view",{staticClass:"animated faster",attrs:{"hover-class":"jello text-main"}},[n("v-uni-text",{staticClass:"iconfont icon-lianjie mr-2",style:t.sizeOfIcon,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.to_info.apply(void 0,arguments)}}}),n("v-uni-text",{class:t.fontSizeUserName,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.to_info.apply(void 0,arguments)}}},[t._v(t._s(t.item.news_name?t.item.news_name.length>16?t.item.news_name.slice(0,15)+"...":t.item.news_name:""))])],1),n("v-uni-view",{staticClass:"animated faster",attrs:{"hover-class":"jello text-main"}},[n("v-uni-text",{staticClass:"iconfont icon-shanchu",style:t.sizeOfIcon,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteComment.apply(void 0,arguments)}}})],1)],1)],1)],1)},a=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},4827:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("617d")),a=i(n("fd9d")),s=n("8684"),r={mixins:[a.default],components:{commentList:o.default},data:function(){return{downOption:{auto:!1},upOption:{auto:!1},dataList:[],pageNum:0,totalSize:0,skinMode:!0,fontSize:"normal",avatar:""}},onLoad:function(){var t=this;try{var e=uni.getStorageSync("skin_mode");""!==e&&(this.skinMode=e)}catch(a){}try{var n=uni.getStorageSync("font-size");""!==n&&(this.fontSize=0==n?"big":1==n?"normal":"small")}catch(a){}try{var i=uni.getStorageSync("avatar");i?(console.log("111"),console.log(i),this.avatar=i):(console.log("222"),this.avatar="../../static/logo.png")}catch(a){}var o=uni.getStorageSync("user_id");uni.request({url:"https://af1o32.toutiao15.com/getTotalSizeByUid",data:{user_id:o},method:"POST",success:function(e){t.totalSize=e.data.result}})},methods:{refresh:function(t){for(var e=[],n=0,i=0;i<this.totalSize;i++)console.log(t,this.dataList[i].comment_id),t!==this.dataList[i].comment_id&&(e[n]=this.dataList[i],n++);this.totalSize--,this.dataList=e},mescrollInit:function(){var t=this,e=uni.getStorageSync("user_id");""!==e&&uni.request({url:"https://af1o32.toutiao15.com/getCommentByUid",data:{user_id:e,count:8,pageNum:this.pageNum},method:"POST",success:function(e){for(var n=0;n<8;n+=1)t.setDataList(e.data.result[n])}})},downCallback:function(){var t=this,e=uni.getStorageSync("user_id");""!==e&&(this.pageNum=this.pageNum+1,uni.request({url:"https://af1o32.toutiao15.com/getCommentByUid",data:{user_id:e,count:8,pageNum:this.pageNum},method:"POST",success:function(e){t.mescroll.endSuccess();for(var n=0;n<8;n+=1)t.setDataList(e.data.result[n])}}))},upCallback:function(){var t=this,e=uni.getStorageSync("user_id");8*this.pageNum+8<this.totalSize?this.mescroll.endSuccess():this.mescroll.endBySize(8,this.totalSize),""!==e&&(this.pageNum=this.pageNum+1,uni.request({url:"https://af1o32.toutiao15.com/getCommentByUid",data:{user_id:e,count:8,pageNum:this.pageNum},method:"POST",success:function(e){for(var n=0;n<8;n+=1)t.setDataList(e.data.result[n])}}))},setDataList:function(t){var e=this;if(t){var n=uni.getStorageSync("username");uni.request({url:"https://af1o32.toutiao15.com/get_news_info",data:{news_id:t.news_id},method:"POST",success:function(i){e.dataList.unshift({comment_timestamp:(0,s.timestampToTime)(t.comment_timestamp),content:t.content,username:n,news_name:i.data.news_name,news_id:t.news_id,comment_id:t._id})}})}}}};e.default=r},"4c27":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mescroll-body",{ref:"mescrollRef",style:t.skinMode?"":"background-color: rgba(0,0,0,0.2)",attrs:{up:t.upOption,down:t.downOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.upCallback.apply(void 0,arguments)}}},t._l(t.dataList,(function(e){return n("v-uni-view",{staticClass:"news-li"},[n("comment-list",{attrs:{item:e,fontSize:t.fontSize,avatar:t.avatar},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.refresh.apply(void 0,arguments)}}})],1)})),1)},a=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"617d":function(t,e,n){"use strict";n.r(e);var i=n("35e8"),o=n("aff4");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("222a");var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"3301b746",null,!1,i["a"],s);e["default"]=u.exports},8684:function(t,e,n){"use strict";function i(t){var e=new Date(1e3*t),n=e.getFullYear()+"-",i=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",o=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",a=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",s=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return n+i+o+a+s+r}Object.defineProperty(e,"__esModule",{value:!0}),e.timestampToTime=i},9722:function(t,e,n){"use strict";n.r(e);var i=n("4c27"),o=n("e749");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"29f11c3e",null,!1,i["a"],s);e["default"]=u.exports},"972f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{}},computed:{fontSizeUserName:function(){return"big"==this.fontSize?"font-md":"normal"==this.fontSize?"font":"font-sm"},fontSizeContent:function(){return"big"==this.fontSize?"font-lg":"normal"==this.fontSize?"font-md":"font"},fontSizeTimestamp:function(){return"big"==this.fontSize?"font-sm":"normal"==this.fontSize?"font-small":"font-smaller"},sizeOfAvatar:function(){return"big"==this.fontSize?"width: 85rpx;height: 85rpx;":"normal"==this.fontSize?"width: 75rpx;height: 75rpx;":"width: 65rpx;height: 65rpx;"},sizeOfIcon:function(){return"big"==this.fontSize?"font-size: 20px;":"normal"==this.fontSize?"font-size: 15px;":"font-size: 10px;"}},props:{item:Object,fontSize:String,avatar:String},methods:{openDetail:function(t){uni.navigateTo({url:"../../pages/info/info?news_id="+t})},deleteComment:function(){var t=this,e=uni.getStorageSync("user_id");uni.request({url:"https://af1o32.toutiao15.com/del_comment",data:{comment_id:this.item.comment_id,user_id:e},method:"POST",success:function(e){t.$emit("refresh",t.item.comment_id)}})},to_info:function(){uni.navigateTo({url:"../../pages/info/info?news_id="+this.item.news_id})}}};e.default=i},aff4:function(t,e,n){"use strict";n.r(e);var i=n("972f"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},e749:function(t,e,n){"use strict";n.r(e);var i=n("4827"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},efa4:function(t,e,n){var i=n("3503");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("96edf998",i,!0,{sourceMap:!1,shadowMode:!1})},fd9d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{mescroll:null}},onPullDownRefresh:function(){this.mescroll&&this.mescroll.onPullDownRefresh()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},methods:{mescrollInit:function(t){this.mescroll=t,this.mescrollInitByRef()},mescrollInitByRef:function(){if(!this.mescroll||!this.mescroll.resetUpScroll){var t=this.$refs.mescrollRef;t&&(this.mescroll=t.mescroll)}},downCallback:function(){this.mescroll.resetUpScroll()},upCallback:function(){var t=this;setTimeout((function(){t.mescroll.endErr()}),500)}},mounted:function(){this.mescrollInitByRef()}},o=i;e.default=o}}]);